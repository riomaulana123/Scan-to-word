<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Scan Foto ke Teks</title>

<!-- OCR -->
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

<!-- Editor -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>

<style>
body {
  font-family: Arial, sans-serif;
  padding: 15px;
  background: #f5f5f5;
}

h2 { margin-top: 0; }

.box {
  background: white;
  padding: 10px;
  border-radius: 6px;
  margin-bottom: 15px;
}

#ocrResult {
  border: 1px solid #ccc;
  padding: 10px;
  min-height: 120px;
  white-space: pre-wrap;
}

button {
  padding: 10px;
  margin-top: 10px;
  width: 100%;
  font-size: 16px;
}
</style>
</head>

<body>

<h2>üì∏ Scan Foto ‚Üí Pilih Teks ‚Üí Kirim</h2>

<div class="box">
  <input type="file" accept="image/*" id="imageInput">
  <button onclick="scanImage()">üîç Scan Gambar</button>
</div>

<div class="box">
  <h3>Hasil Scan (blok teks yang mau dipilih)</h3>
  <div id="ocrResult"></div>
  <button onclick="sendSelectedText()">üì§ Kirim Teks Terpilih</button>
</div>

<div class="box">
  <h3>Editor (Siap dikirim ke Word)</h3>
  <div id="editor" style="height:200px;"></div>
</div>

<script>
const quill = new Quill('#editor', {
  theme: 'snow'
});

function scanImage() {
  const file = document.getElementById('imageInput').files[0];
  if (!file) return alert("Pilih gambar dulu");

  document.getElementById('ocrResult').innerText = "‚è≥ Memproses...";

  Tesseract.recognize(
    file,
    'eng+ind',
    {
      logger: m => console.log(m)
    }
  ).then(({ data }) => {
    document.getElementById('ocrResult').innerText = data.text;
  });
}

function sendSelectedText() {
  const selection = window.getSelection().toString();
  if (!selection) {
    alert("Blok dulu teks yang mau dikirim");
    return;
  }
  quill.insertText(quill.getLength(), selection + "\n");
}
</script>

</body>
</html>
